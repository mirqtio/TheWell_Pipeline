995ceed18fe9c1ac24ce9d580859a72e
/**
 * Simplified E2E tests for visibility management workflow
 * Tests the complete flow without browser automation
 */

const request = require('supertest');
const {
  spawn
} = require('child_process');
const path = require('path');
describe('Visibility Management E2E Workflow', () => {
  let serverProcess;
  let baseUrl;
  let startupTimeout;
  beforeAll(async () => {
    // Start the web server
    return new Promise((resolve, reject) => {
      const serverPath = path.join(__dirname, '../../src/web/start.js');
      serverProcess = spawn('node', [serverPath], {
        env: {
          ...process.env,
          WEB_PORT: '0',
          // Use random port with correct env var
          NODE_ENV: 'development' // Bypass authentication
        },
        stdio: ['pipe', 'pipe', 'pipe']
      });
      let output = '';
      serverProcess.stdout.on('data', data => {
        output += data.toString();
        console.log('Server output:', data.toString()); // Debug output
        // Look for server started message
        if (output.includes('Manual review server started')) {
          const portMatch = output.match(/port[:\s]*(\d+)/i);
          if (portMatch) {
            baseUrl = `http://localhost:${portMatch[1]}`;
            console.log('Server started at:', baseUrl); // Debug output
            if (startupTimeout) {
              clearTimeout(startupTimeout);
              startupTimeout = null;
            }
            resolve();
          }
        }
      });
      serverProcess.stderr.on('data', data => {
        console.error('Server error:', data.toString());
      });
      serverProcess.on('error', reject);

      // Timeout after 10 seconds
      startupTimeout = setTimeout(() => {
        reject(new Error('Server failed to start within timeout'));
      }, 10000);
    });
  }, 15000);
  afterAll(async () => {
    if (startupTimeout) {
      clearTimeout(startupTimeout);
      startupTimeout = null;
    }
    if (serverProcess) {
      serverProcess.kill();
      // Wait for process to exit
      await new Promise(resolve => {
        let exitTimeout;
        const onExit = () => {
          if (exitTimeout) {
            clearTimeout(exitTimeout);
          }
          resolve();
        };
        serverProcess.on('exit', onExit);
        exitTimeout = setTimeout(onExit, 1000); // Fallback timeout
      });
    }
  });
  describe('Manual Review Interface', () => {
    it('should serve the main interface', async () => {
      const response = await request(baseUrl).get('/').expect(200);
      expect(response.text).toContain('TheWell Pipeline');
      expect(response.text).toContain('Manual Review');
      expect(response.text).toContain('visibility-view');
    });
    it('should serve static assets', async () => {
      await request(baseUrl).get('/app.js').expect(200);
      await request(baseUrl).get('/styles.css').expect(200);
    });
  });
  describe('API Endpoints', () => {
    it('should return system status', async () => {
      const response = await request(baseUrl).get('/api/status').expect(200);
      expect(response.body).toHaveProperty('status');
      expect(response.body.status).toHaveProperty('timestamp');
    });
    it('should handle review API endpoints', async () => {
      // Test documents endpoint (should work even without auth for basic structure)
      const response = await request(baseUrl).get('/api/review/pending').expect(200);
      expect(response.body).toHaveProperty('documents');
      expect(Array.isArray(response.body.documents)).toBe(true);
    });
    it('should handle jobs API endpoints', async () => {
      // Test jobs endpoint (should work even without auth for basic structure)
      const response = await request(baseUrl).get('/api/jobs/stats/overview').expect(200);
      expect(response.body).toHaveProperty('stats');
    });
  });
  describe('Visibility Management API Structure', () => {
    it('should have visibility endpoints available', async () => {
      // Test that visibility endpoints exist (even if they return 401/503)
      const endpoints = ['/api/visibility/document/test', '/api/visibility/approvals', '/api/visibility/rules', '/api/visibility/audit'];
      for (const endpoint of endpoints) {
        const response = await request(baseUrl).get(endpoint);
        // Should not return 404 (endpoint exists)
        expect(response.status).not.toBe(404);
        // Should return either 401 (auth required) or 503 (not enabled) or 200
        expect([200, 401, 503]).toContain(response.status);
      }
    });
    it('should handle visibility document updates', async () => {
      const response = await request(baseUrl).put('/api/visibility/document/test-doc').send({
        visibility: 'public',
        reason: 'Test'
      });

      // Should not return 404 (endpoint exists)
      expect(response.status).not.toBe(404);
      // Should return either 401 (auth required) or 503 (not enabled) or 400 (validation)
      expect([400, 401, 503]).toContain(response.status);
    });
    it('should handle bulk visibility updates', async () => {
      const response = await request(baseUrl).put('/api/visibility/bulk-update').send({
        updates: [{
          documentId: 'doc1',
          visibility: 'internal'
        }],
        reason: 'Test bulk update'
      });

      // Should not return 404 (endpoint exists)
      expect(response.status).not.toBe(404);
      expect([400, 401, 503]).toContain(response.status);
    });
  });
  describe('Frontend Integration', () => {
    it('should include visibility management JavaScript', async () => {
      const response = await request(baseUrl).get('/app.js').expect(200);

      // Check for visibility management functions
      expect(response.text).toContain('loadVisibilityData');
      expect(response.text).toContain('setDocumentVisibility');
      expect(response.text).toContain('bulkUpdateVisibility');
      expect(response.text).toContain('approveVisibilityChange');
      expect(response.text).toContain('rejectVisibilityChange');
      expect(response.text).toContain('addVisibilityRule');
    });
    it('should include visibility management UI elements', async () => {
      const response = await request(baseUrl).get('/').expect(200);

      // Check for visibility UI elements
      expect(response.text).toContain('visibility-view');
      expect(response.text).toContain('visibility-documents-container');
      expect(response.text).toContain('pending-approvals-container');
      expect(response.text).toContain('visibility-rules-container');
      expect(response.text).toContain('audit-log-container');

      // Check for modals
      expect(response.text).toContain('bulkVisibilityModal');
      expect(response.text).toContain('addRuleModal');
      expect(response.text).toContain('documentVisibilityModal');
    });
    it('should include proper navigation for visibility tab', async () => {
      const response = await request(baseUrl).get('/').expect(200);
      expect(response.text).toContain('data-view="visibility"');
      expect(response.text).toContain('Visibility Management');
    });
  });
  describe('Error Handling', () => {
    it('should handle invalid routes gracefully', async () => {
      await request(baseUrl).get('/api/invalid-endpoint').expect(404);
    });
    it('should handle malformed API requests', async () => {
      const response = await request(baseUrl).post('/api/visibility/rules').send({
        invalid: 'data'
      });
      expect([400, 401, 503]).toContain(response.status);
    });
  });
  describe('Performance and Reliability', () => {
    it('should respond to multiple concurrent requests', async () => {
      const requests = Array(5).fill().map(() => request(baseUrl).get('/api/status'));
      const responses = await Promise.all(requests);
      responses.forEach(response => {
        expect(response.status).toBe(200);
      });
    });
    it('should maintain consistent response times', async () => {
      const startTime = Date.now();
      await request(baseUrl).get('/').expect(200);
      const responseTime = Date.now() - startTime;
      expect(responseTime).toBeLessThan(5000); // Should respond within 5 seconds
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXF1ZXN0IiwicmVxdWlyZSIsInNwYXduIiwicGF0aCIsImRlc2NyaWJlIiwic2VydmVyUHJvY2VzcyIsImJhc2VVcmwiLCJzdGFydHVwVGltZW91dCIsImJlZm9yZUFsbCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2VydmVyUGF0aCIsImpvaW4iLCJfX2Rpcm5hbWUiLCJlbnYiLCJwcm9jZXNzIiwiV0VCX1BPUlQiLCJOT0RFX0VOViIsInN0ZGlvIiwib3V0cHV0Iiwic3Rkb3V0Iiwib24iLCJkYXRhIiwidG9TdHJpbmciLCJjb25zb2xlIiwibG9nIiwiaW5jbHVkZXMiLCJwb3J0TWF0Y2giLCJtYXRjaCIsImNsZWFyVGltZW91dCIsInN0ZGVyciIsImVycm9yIiwic2V0VGltZW91dCIsIkVycm9yIiwiYWZ0ZXJBbGwiLCJraWxsIiwiZXhpdFRpbWVvdXQiLCJvbkV4aXQiLCJpdCIsInJlc3BvbnNlIiwiZ2V0IiwiZXhwZWN0IiwidGV4dCIsInRvQ29udGFpbiIsImJvZHkiLCJ0b0hhdmVQcm9wZXJ0eSIsInN0YXR1cyIsIkFycmF5IiwiaXNBcnJheSIsImRvY3VtZW50cyIsInRvQmUiLCJlbmRwb2ludHMiLCJlbmRwb2ludCIsIm5vdCIsInB1dCIsInNlbmQiLCJ2aXNpYmlsaXR5IiwicmVhc29uIiwidXBkYXRlcyIsImRvY3VtZW50SWQiLCJwb3N0IiwiaW52YWxpZCIsInJlcXVlc3RzIiwiZmlsbCIsIm1hcCIsInJlc3BvbnNlcyIsImFsbCIsImZvckVhY2giLCJzdGFydFRpbWUiLCJEYXRlIiwibm93IiwicmVzcG9uc2VUaW1lIiwidG9CZUxlc3NUaGFuIl0sInNvdXJjZXMiOlsidmlzaWJpbGl0eS1tYW5hZ2VtZW50LXNpbXBsZS50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogU2ltcGxpZmllZCBFMkUgdGVzdHMgZm9yIHZpc2liaWxpdHkgbWFuYWdlbWVudCB3b3JrZmxvd1xuICogVGVzdHMgdGhlIGNvbXBsZXRlIGZsb3cgd2l0aG91dCBicm93c2VyIGF1dG9tYXRpb25cbiAqL1xuXG5jb25zdCByZXF1ZXN0ID0gcmVxdWlyZSgnc3VwZXJ0ZXN0Jyk7XG5jb25zdCB7IHNwYXduIH0gPSByZXF1aXJlKCdjaGlsZF9wcm9jZXNzJyk7XG5jb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuXG5kZXNjcmliZSgnVmlzaWJpbGl0eSBNYW5hZ2VtZW50IEUyRSBXb3JrZmxvdycsICgpID0+IHtcbiAgbGV0IHNlcnZlclByb2Nlc3M7XG4gIGxldCBiYXNlVXJsO1xuICBsZXQgc3RhcnR1cFRpbWVvdXQ7XG5cbiAgYmVmb3JlQWxsKGFzeW5jICgpID0+IHtcbiAgICAvLyBTdGFydCB0aGUgd2ViIHNlcnZlclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBjb25zdCBzZXJ2ZXJQYXRoID0gcGF0aC5qb2luKF9fZGlybmFtZSwgJy4uLy4uL3NyYy93ZWIvc3RhcnQuanMnKTtcbiAgICAgIHNlcnZlclByb2Nlc3MgPSBzcGF3bignbm9kZScsIFtzZXJ2ZXJQYXRoXSwge1xuICAgICAgICBlbnY6IHsgXG4gICAgICAgICAgLi4ucHJvY2Vzcy5lbnYsIFxuICAgICAgICAgIFdFQl9QT1JUOiAnMCcsIC8vIFVzZSByYW5kb20gcG9ydCB3aXRoIGNvcnJlY3QgZW52IHZhclxuICAgICAgICAgIE5PREVfRU5WOiAnZGV2ZWxvcG1lbnQnIC8vIEJ5cGFzcyBhdXRoZW50aWNhdGlvblxuICAgICAgICB9LFxuICAgICAgICBzdGRpbzogWydwaXBlJywgJ3BpcGUnLCAncGlwZSddXG4gICAgICB9KTtcblxuICAgICAgbGV0IG91dHB1dCA9ICcnO1xuICAgICAgc2VydmVyUHJvY2Vzcy5zdGRvdXQub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICBvdXRwdXQgKz0gZGF0YS50b1N0cmluZygpO1xuICAgICAgICBjb25zb2xlLmxvZygnU2VydmVyIG91dHB1dDonLCBkYXRhLnRvU3RyaW5nKCkpOyAvLyBEZWJ1ZyBvdXRwdXRcbiAgICAgICAgLy8gTG9vayBmb3Igc2VydmVyIHN0YXJ0ZWQgbWVzc2FnZVxuICAgICAgICBpZiAob3V0cHV0LmluY2x1ZGVzKCdNYW51YWwgcmV2aWV3IHNlcnZlciBzdGFydGVkJykpIHtcbiAgICAgICAgICBjb25zdCBwb3J0TWF0Y2ggPSBvdXRwdXQubWF0Y2goL3BvcnRbOlxcc10qKFxcZCspL2kpO1xuICAgICAgICAgIGlmIChwb3J0TWF0Y2gpIHtcbiAgICAgICAgICAgIGJhc2VVcmwgPSBgaHR0cDovL2xvY2FsaG9zdDoke3BvcnRNYXRjaFsxXX1gO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1NlcnZlciBzdGFydGVkIGF0OicsIGJhc2VVcmwpOyAvLyBEZWJ1ZyBvdXRwdXRcbiAgICAgICAgICAgIGlmIChzdGFydHVwVGltZW91dCkge1xuICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoc3RhcnR1cFRpbWVvdXQpO1xuICAgICAgICAgICAgICBzdGFydHVwVGltZW91dCA9IG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgc2VydmVyUHJvY2Vzcy5zdGRlcnIub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTZXJ2ZXIgZXJyb3I6JywgZGF0YS50b1N0cmluZygpKTtcbiAgICAgIH0pO1xuXG4gICAgICBzZXJ2ZXJQcm9jZXNzLm9uKCdlcnJvcicsIHJlamVjdCk7XG5cbiAgICAgIC8vIFRpbWVvdXQgYWZ0ZXIgMTAgc2Vjb25kc1xuICAgICAgc3RhcnR1cFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignU2VydmVyIGZhaWxlZCB0byBzdGFydCB3aXRoaW4gdGltZW91dCcpKTtcbiAgICAgIH0sIDEwMDAwKTtcbiAgICB9KTtcbiAgfSwgMTUwMDApO1xuXG4gIGFmdGVyQWxsKGFzeW5jICgpID0+IHtcbiAgICBpZiAoc3RhcnR1cFRpbWVvdXQpIHtcbiAgICAgIGNsZWFyVGltZW91dChzdGFydHVwVGltZW91dCk7XG4gICAgICBzdGFydHVwVGltZW91dCA9IG51bGw7XG4gICAgfVxuICAgIFxuICAgIGlmIChzZXJ2ZXJQcm9jZXNzKSB7XG4gICAgICBzZXJ2ZXJQcm9jZXNzLmtpbGwoKTtcbiAgICAgIC8vIFdhaXQgZm9yIHByb2Nlc3MgdG8gZXhpdFxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgbGV0IGV4aXRUaW1lb3V0O1xuICAgICAgICBjb25zdCBvbkV4aXQgPSAoKSA9PiB7XG4gICAgICAgICAgaWYgKGV4aXRUaW1lb3V0KSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoZXhpdFRpbWVvdXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBzZXJ2ZXJQcm9jZXNzLm9uKCdleGl0Jywgb25FeGl0KTtcbiAgICAgICAgZXhpdFRpbWVvdXQgPSBzZXRUaW1lb3V0KG9uRXhpdCwgMTAwMCk7IC8vIEZhbGxiYWNrIHRpbWVvdXRcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01hbnVhbCBSZXZpZXcgSW50ZXJmYWNlJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgc2VydmUgdGhlIG1haW4gaW50ZXJmYWNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy8nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ1RoZVdlbGwgUGlwZWxpbmUnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ01hbnVhbCBSZXZpZXcnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ3Zpc2liaWxpdHktdmlldycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBzZXJ2ZSBzdGF0aWMgYXNzZXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVxdWVzdChiYXNlVXJsKVxuICAgICAgICAuZ2V0KCcvYXBwLmpzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy9zdHlsZXMuY3NzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQVBJIEVuZHBvaW50cycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiBzeXN0ZW0gc3RhdHVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy9hcGkvc3RhdHVzJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N0YXR1cycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmJvZHkuc3RhdHVzKS50b0hhdmVQcm9wZXJ0eSgndGltZXN0YW1wJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXZpZXcgQVBJIGVuZHBvaW50cycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgZG9jdW1lbnRzIGVuZHBvaW50IChzaG91bGQgd29yayBldmVuIHdpdGhvdXQgYXV0aCBmb3IgYmFzaWMgc3RydWN0dXJlKVxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy9hcGkvcmV2aWV3L3BlbmRpbmcnKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5ib2R5KS50b0hhdmVQcm9wZXJ0eSgnZG9jdW1lbnRzJyk7XG4gICAgICBleHBlY3QoQXJyYXkuaXNBcnJheShyZXNwb25zZS5ib2R5LmRvY3VtZW50cykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBqb2JzIEFQSSBlbmRwb2ludHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBUZXN0IGpvYnMgZW5kcG9pbnQgKHNob3VsZCB3b3JrIGV2ZW4gd2l0aG91dCBhdXRoIGZvciBiYXNpYyBzdHJ1Y3R1cmUpXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYmFzZVVybClcbiAgICAgICAgLmdldCgnL2FwaS9qb2JzL3N0YXRzL292ZXJ2aWV3JylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuYm9keSkudG9IYXZlUHJvcGVydHkoJ3N0YXRzJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdWaXNpYmlsaXR5IE1hbmFnZW1lbnQgQVBJIFN0cnVjdHVyZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhdmUgdmlzaWJpbGl0eSBlbmRwb2ludHMgYXZhaWxhYmxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8gVGVzdCB0aGF0IHZpc2liaWxpdHkgZW5kcG9pbnRzIGV4aXN0IChldmVuIGlmIHRoZXkgcmV0dXJuIDQwMS81MDMpXG4gICAgICBjb25zdCBlbmRwb2ludHMgPSBbXG4gICAgICAgICcvYXBpL3Zpc2liaWxpdHkvZG9jdW1lbnQvdGVzdCcsXG4gICAgICAgICcvYXBpL3Zpc2liaWxpdHkvYXBwcm92YWxzJyxcbiAgICAgICAgJy9hcGkvdmlzaWJpbGl0eS9ydWxlcycsXG4gICAgICAgICcvYXBpL3Zpc2liaWxpdHkvYXVkaXQnXG4gICAgICBdO1xuXG4gICAgICBmb3IgKGNvbnN0IGVuZHBvaW50IG9mIGVuZHBvaW50cykge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYmFzZVVybCkuZ2V0KGVuZHBvaW50KTtcbiAgICAgICAgLy8gU2hvdWxkIG5vdCByZXR1cm4gNDA0IChlbmRwb2ludCBleGlzdHMpXG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLm5vdC50b0JlKDQwNCk7XG4gICAgICAgIC8vIFNob3VsZCByZXR1cm4gZWl0aGVyIDQwMSAoYXV0aCByZXF1aXJlZCkgb3IgNTAzIChub3QgZW5hYmxlZCkgb3IgMjAwXG4gICAgICAgIGV4cGVjdChbMjAwLCA0MDEsIDUwM10pLnRvQ29udGFpbihyZXNwb25zZS5zdGF0dXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmlzaWJpbGl0eSBkb2N1bWVudCB1cGRhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5wdXQoJy9hcGkvdmlzaWJpbGl0eS9kb2N1bWVudC90ZXN0LWRvYycpXG4gICAgICAgIC5zZW5kKHsgdmlzaWJpbGl0eTogJ3B1YmxpYycsIHJlYXNvbjogJ1Rlc3QnIH0pO1xuXG4gICAgICAvLyBTaG91bGQgbm90IHJldHVybiA0MDQgKGVuZHBvaW50IGV4aXN0cylcbiAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLm5vdC50b0JlKDQwNCk7XG4gICAgICAvLyBTaG91bGQgcmV0dXJuIGVpdGhlciA0MDEgKGF1dGggcmVxdWlyZWQpIG9yIDUwMyAobm90IGVuYWJsZWQpIG9yIDQwMCAodmFsaWRhdGlvbilcbiAgICAgIGV4cGVjdChbNDAwLCA0MDEsIDUwM10pLnRvQ29udGFpbihyZXNwb25zZS5zdGF0dXMpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYnVsayB2aXNpYmlsaXR5IHVwZGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYmFzZVVybClcbiAgICAgICAgLnB1dCgnL2FwaS92aXNpYmlsaXR5L2J1bGstdXBkYXRlJylcbiAgICAgICAgLnNlbmQoe1xuICAgICAgICAgIHVwZGF0ZXM6IFt7IGRvY3VtZW50SWQ6ICdkb2MxJywgdmlzaWJpbGl0eTogJ2ludGVybmFsJyB9XSxcbiAgICAgICAgICByZWFzb246ICdUZXN0IGJ1bGsgdXBkYXRlJ1xuICAgICAgICB9KTtcblxuICAgICAgLy8gU2hvdWxkIG5vdCByZXR1cm4gNDA0IChlbmRwb2ludCBleGlzdHMpXG4gICAgICBleHBlY3QocmVzcG9uc2Uuc3RhdHVzKS5ub3QudG9CZSg0MDQpO1xuICAgICAgZXhwZWN0KFs0MDAsIDQwMSwgNTAzXSkudG9Db250YWluKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGcm9udGVuZCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdmlzaWJpbGl0eSBtYW5hZ2VtZW50IEphdmFTY3JpcHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QoYmFzZVVybClcbiAgICAgICAgLmdldCgnL2FwcC5qcycpXG4gICAgICAgIC5leHBlY3QoMjAwKTtcblxuICAgICAgLy8gQ2hlY2sgZm9yIHZpc2liaWxpdHkgbWFuYWdlbWVudCBmdW5jdGlvbnNcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ2xvYWRWaXNpYmlsaXR5RGF0YScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQ29udGFpbignc2V0RG9jdW1lbnRWaXNpYmlsaXR5Jyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCdidWxrVXBkYXRlVmlzaWJpbGl0eScpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQ29udGFpbignYXBwcm92ZVZpc2liaWxpdHlDaGFuZ2UnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ3JlamVjdFZpc2liaWxpdHlDaGFuZ2UnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ2FkZFZpc2liaWxpdHlSdWxlJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgdmlzaWJpbGl0eSBtYW5hZ2VtZW50IFVJIGVsZW1lbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy8nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIC8vIENoZWNrIGZvciB2aXNpYmlsaXR5IFVJIGVsZW1lbnRzXG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCd2aXNpYmlsaXR5LXZpZXcnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ3Zpc2liaWxpdHktZG9jdW1lbnRzLWNvbnRhaW5lcicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQ29udGFpbigncGVuZGluZy1hcHByb3ZhbHMtY29udGFpbmVyJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCd2aXNpYmlsaXR5LXJ1bGVzLWNvbnRhaW5lcicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQ29udGFpbignYXVkaXQtbG9nLWNvbnRhaW5lcicpO1xuXG4gICAgICAvLyBDaGVjayBmb3IgbW9kYWxzXG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCdidWxrVmlzaWJpbGl0eU1vZGFsJyk7XG4gICAgICBleHBlY3QocmVzcG9uc2UudGV4dCkudG9Db250YWluKCdhZGRSdWxlTW9kYWwnKTtcbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ2RvY3VtZW50VmlzaWJpbGl0eU1vZGFsJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGluY2x1ZGUgcHJvcGVyIG5hdmlnYXRpb24gZm9yIHZpc2liaWxpdHkgdGFiJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5nZXQoJy8nKVxuICAgICAgICAuZXhwZWN0KDIwMCk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS50ZXh0KS50b0NvbnRhaW4oJ2RhdGEtdmlldz1cInZpc2liaWxpdHlcIicpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRleHQpLnRvQ29udGFpbignVmlzaWJpbGl0eSBNYW5hZ2VtZW50Jyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIHJvdXRlcyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcmVxdWVzdChiYXNlVXJsKVxuICAgICAgICAuZ2V0KCcvYXBpL2ludmFsaWQtZW5kcG9pbnQnKVxuICAgICAgICAuZXhwZWN0KDQwNCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgQVBJIHJlcXVlc3RzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0KGJhc2VVcmwpXG4gICAgICAgIC5wb3N0KCcvYXBpL3Zpc2liaWxpdHkvcnVsZXMnKVxuICAgICAgICAuc2VuZCh7IGludmFsaWQ6ICdkYXRhJyB9KTtcblxuICAgICAgZXhwZWN0KFs0MDAsIDQwMSwgNTAzXSkudG9Db250YWluKHJlc3BvbnNlLnN0YXR1cyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBhbmQgUmVsaWFiaWxpdHknLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXNwb25kIHRvIG11bHRpcGxlIGNvbmN1cnJlbnQgcmVxdWVzdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5KDUpLmZpbGwoKS5tYXAoKCkgPT4gXG4gICAgICAgIHJlcXVlc3QoYmFzZVVybCkuZ2V0KCcvYXBpL3N0YXR1cycpXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXNwb25zZXMgPSBhd2FpdCBQcm9taXNlLmFsbChyZXF1ZXN0cyk7XG4gICAgICByZXNwb25zZXMuZm9yRWFjaChyZXNwb25zZSA9PiB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZS5zdGF0dXMpLnRvQmUoMjAwKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBtYWludGFpbiBjb25zaXN0ZW50IHJlc3BvbnNlIHRpbWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIFxuICAgICAgYXdhaXQgcmVxdWVzdChiYXNlVXJsKVxuICAgICAgICAuZ2V0KCcvJylcbiAgICAgICAgLmV4cGVjdCgyMDApO1xuICAgICAgXG4gICAgICBjb25zdCByZXNwb25zZVRpbWUgPSBEYXRlLm5vdygpIC0gc3RhcnRUaW1lO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlVGltZSkudG9CZUxlc3NUaGFuKDUwMDApOyAvLyBTaG91bGQgcmVzcG9uZCB3aXRoaW4gNSBzZWNvbmRzXG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1BLE9BQU8sR0FBR0MsT0FBTyxDQUFDLFdBQVcsQ0FBQztBQUNwQyxNQUFNO0VBQUVDO0FBQU0sQ0FBQyxHQUFHRCxPQUFPLENBQUMsZUFBZSxDQUFDO0FBQzFDLE1BQU1FLElBQUksR0FBR0YsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUU1QkcsUUFBUSxDQUFDLG9DQUFvQyxFQUFFLE1BQU07RUFDbkQsSUFBSUMsYUFBYTtFQUNqQixJQUFJQyxPQUFPO0VBQ1gsSUFBSUMsY0FBYztFQUVsQkMsU0FBUyxDQUFDLFlBQVk7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QUFHLENBQUMsdUJBQXVCLENBQUMsQ0FDNUJDLE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFDaEIsQ0FBQyxDQUFDO0lBRUZILEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxZQUFZO01BQ3JELE1BQU1DLFFBQVEsR0FBRyxNQUFNeEMsT0FBTyxDQUFDTSxPQUFPLENBQUMsQ0FDcEN1RCxJQUFJLENBQUMsdUJBQXVCLENBQUMsQ0FDN0JMLElBQUksQ0FBQztRQUFFTSxPQUFPLEVBQUU7TUFBTyxDQUFDLENBQUM7TUFFNUJwQixNQUFNLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUNFLFNBQVMsQ0FBQ0osUUFBUSxDQUFDTyxNQUFNLENBQUM7SUFDcEQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYzQyxRQUFRLENBQUMsNkJBQTZCLEVBQUUsTUFBTTtJQUM1Q21DLEVBQUUsQ0FBQyxnREFBZ0QsRUFBRSxZQUFZO01BQy9ELE1BQU13QixRQUFRLEdBQUdmLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQ2dCLElBQUksQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBQyxNQUNuQ2pFLE9BQU8sQ0FBQ00sT0FBTyxDQUFDLENBQUNtQyxHQUFHLENBQUMsYUFBYSxDQUNwQyxDQUFDO01BRUQsTUFBTXlCLFNBQVMsR0FBRyxNQUFNekQsT0FBTyxDQUFDMEQsR0FBRyxDQUFDSixRQUFRLENBQUM7TUFDN0NHLFNBQVMsQ0FBQ0UsT0FBTyxDQUFDNUIsUUFBUSxJQUFJO1FBQzVCRSxNQUFNLENBQUNGLFFBQVEsQ0FBQ08sTUFBTSxDQUFDLENBQUNJLElBQUksQ0FBQyxHQUFHLENBQUM7TUFDbkMsQ0FBQyxDQUFDO0lBQ0osQ0FBQyxDQUFDO0lBRUZaLEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxZQUFZO01BQzFELE1BQU04QixTQUFTLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUM7TUFFNUIsTUFBTXZFLE9BQU8sQ0FBQ00sT0FBTyxDQUFDLENBQ25CbUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUNSQyxNQUFNLENBQUMsR0FBRyxDQUFDO01BRWQsTUFBTThCLFlBQVksR0FBR0YsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxHQUFHRixTQUFTO01BQzNDM0IsTUFBTSxDQUFDOEIsWUFBWSxDQUFDLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQzNDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==